(()=>{"use strict";var e=function(e){var t=e.contextList,n=e.text,r=e.styleId,a=e.styleClass,o=document.createElement("li");o.className=a,o.id=r,o.textContent=n,t.appendChild(o)},t=function(e){var t,n=e.eventTarget,r=e.arr,a=n.closest(".image-wrapper");if(a){var o=null===(t=a.dataset)||void 0===t?void 0:t.id;return r.find((function(e){return e.id===Number(o)}))}},n=function(e){return new Promise((function(t){var n=e.eventTarget.closest(".image-wrapper");if(n){var r=n.querySelector(".image-text"),a=r.textContent,o=document.createElement("input");o.type="text",o.value=a||"",r.textContent="",r.appendChild(o),o.focus(),o.select(),o.addEventListener("keypress",(function(e){"Enter"===e.key&&o.blur()})),o.addEventListener("blur",(function(){var e=o.value.trim();a!==e&&(r.textContent=e),t(e)}))}}))},r=function(e){var t=e.array,n=e.filename,r=function(e){var t=e.arr;return function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}([Object.keys(t[0]).join(",")],t.map((function(e){return Object.values(e).join(",")})),!0).join("\n")}({arr:t}),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),c=document.createElement("a");c.setAttribute("download",n),c.href=o,c.click(),URL.revokeObjectURL(o)};function a(){return e=this,t=void 0,r=function(){var e;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=i(0),c.throw=i(1),c.return=i(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return[4,fetch("https://gist.githubusercontent.com/lilla-nemeth/888f537b4a9f52ddd97a369948b74c0a/raw/97f179c8fc37a8ba0ce1b0c891f102bc9cb32448/images.json")];case 1:if(!(e=t.sent()).ok)throw new Error("Fetching images has failed");return[4,e.json()];case 2:return[2,t.sent()]}}))},new((n=void 0)||(n=Promise))((function(a,o){function c(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r}var o,c,i,l,u=document.getElementById("content-container"),s=[];o=void 0,c=void 0,l=function(){var e;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=i(0),c.throw=i(1),c.return=i(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,a()];case 1:return r=(n={images:s=t.sent(),container:u}).images,o=n.container,c=r.map((function(e){var t=document.createElement("div");t.className="image-wrapper",t.id="image-text-".concat(e.id),t.setAttribute("data-id",e.id.toString());var n=document.createElement("img");n.className="image",n.loading="lazy",n.src=e.url;var r=document.createElement("div");return r.className="image-text",r.textContent=e.text,t.appendChild(n),t.appendChild(r),t})),(i=document.createElement("div")).className="image-container",c.forEach((function(e){i.appendChild(e)})),o.appendChild(i),[3,3];case 2:throw e=t.sent(),console.log(e),new Error;case 3:return[2]}var n,r,o,c,i}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{a(l.next(e))}catch(e){t(e)}}function r(e){try{a(l.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof i?a:new i((function(e){e(a)}))).then(n,r)}a((l=l.apply(o,c||[])).next())}));var f=document.createElement("div");f.className="context-menu";var d=document.createElement("ul");e({document,contextList:d,text:"Delete",styleId:"context-menu-delete",styleClass:"context-menu-actions"}),e({document,contextList:d,text:"Edit Text",styleId:"context-menu-edit",styleClass:"context-menu-actions"}),e({document,contextList:d,text:"Export List to CSV",styleId:"context-menu-csv",styleClass:"context-menu-actions"}),f.appendChild(d),document.body.appendChild(f);var p=null;u.addEventListener("contextmenu",(function(e){(null==(p=e.target)?void 0:p.closest(".image-wrapper"))&&(e.preventDefault(),function(e){e.preventDefault(),f.classList.add("visible"),f.style.left="".concat(e.pageX,"px"),f.style.top="".concat(e.pageY,"px")}(e))})),document.addEventListener("click",(function(e){var a,o=e.target;if(p)switch(o.id){case"context-menu-edit":n({eventTarget:p}),a={eventTarget:p,arr:s},function(e,t,n,r){new(n||(n=Promise))((function(a,o){function c(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}l((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e,r,o,c,i;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=i(0),c.throw=i(1),c.return=i(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(l){switch(l.label){case 0:return(o=t({eventTarget:e=a.eventTarget,arr:r=a.arr}))&&(c=r.indexOf(o))>-1?[4,n({eventTarget:e})]:[3,2];case 1:i=l.sent(),r[c].text=i,l.label=2;case 2:return[2]}}))})),p=null;break;case"context-menu-delete":!function(e){var n=e.arr,r=t({eventTarget:e.eventTarget,arr:n});if(r){var a=n.indexOf(r);a>-1&&n.splice(a,1)}}({eventTarget:p,arr:s}),function(e){var t=e.eventTarget,n=e.styleClass,r=null==t?void 0:t.closest(n);null==r||r.remove()}({eventTarget:p,styleClass:".image-wrapper"}),p=null;break;case"context-menu-csv":r({array:s,filename:"list.csv"})}f.classList.remove("visible")}))})();